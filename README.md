README - Локальный запуск проекта с использованием Docker Compose

Этот проект включает два сервиса: приложение (app-service) и базу данных PostgreSQL (db). Для локальной разработки и тестирования используется Docker Compose для создания и управления контейнерами.
Содержание

    Предварительные требования
    Запуск проекта
    Остановка проекта
    Проверка работоспособности
    Настройка конфигурации

1. Предварительные требования

Перед тем как запустить проект, убедитесь, что у вас установлены следующие инструменты:

    Docker — необходимо для работы с контейнерами.
        Инструкции по установке можно найти на официальном сайте Docker.
    Docker Compose — инструмент для работы с несколькими контейнерами одновременно.
        Для установки Docker Compose следуйте этим инструкциям.

После установки Docker и Docker Compose убедитесь, что они работают корректно, выполнив команду:

docker --version
docker-compose --version

Если версии отображаются, значит, Docker и Docker Compose установлены правильно.
2. Запуск проекта

   Клонируйте репозиторий проекта на свою машину (если еще не сделано):

git clone <URL-репозитория>
cd <директория проекта>

Создайте и запустите контейнеры с помощью Docker Compose:

В корневой папке проекта выполните команду:

docker-compose up --build

Что делает эта команда:

    docker-compose up — создает и запускает все сервисы, определенные в docker-compose.yml.
    --build — пересобирает образы, если они изменены. Это важно, если вы только что внесли изменения в Dockerfile или конфигурацию.

Контейнеры будут запущены в фоновом режиме, и вы увидите вывод логов в терминале.

Пример вывода при запуске:

    Creating network "project_default" with the default driver
    Creating volume "project_postgres-data" with default driver
    Creating app-db ... done
    Creating app-service ... done

    Ожидание завершения запуска: Docker Compose поднимет два контейнера:
        Контейнер с приложением (образ app-service).
        Контейнер с базой данных PostgreSQL (образ postgres:latest).

    Процесс может занять некоторое время, но как только все контейнеры будут запущены, вы сможете получить доступ к вашему приложению.

3. Остановка проекта

Чтобы остановить и удалить контейнеры, выполните команду:

docker-compose down

Эта команда:

    Остановит все контейнеры.
    Удалит контейнеры, сети и тома, созданные для проекта.
    Важно: данные базы данных, сохраненные в томе postgres-data, останутся, чтобы их можно было использовать при следующем запуске.

4. Проверка работоспособности

После того как контейнеры запустятся, вы сможете проверить работоспособность приложения и базы данных.

    Swagger UI: Для доступа к API документации через Swagger UI перейдите по следующему адресу в браузере:

    http://localhost:8080/swagger-ui/index.html

    На этой странице вы сможете протестировать доступные API маршруты.

    Проверка базы данных: Чтобы проверить подключение к базе данных, используйте любой SQL-клиент (например, DBeaver) для подключения к базе данных PostgreSQL:
        URL: jdbc:postgresql://localhost:5432/TestBd
        Пользователь: postgres
        Пароль: 28762876

    Убедитесь, что база данных доступна и все таблицы корректно созданы.

5. Настройка конфигурации

Контейнеры используют переменные окружения для настройки подключения к базе данных. Вот параметры, которые могут быть настроены в файле docker-compose.yml:
Для app-service (приложение):

    SPRING_DATASOURCE_URL: URL для подключения к базе данных. В данном случае: jdbc:postgresql://db:5432/TestBd.
    SPRING_DATASOURCE_USERNAME: Имя пользователя для подключения к базе данных. В данном случае: postgres.
    SPRING_DATASOURCE_PASSWORD: Пароль для подключения к базе данных. В данном случае: 28762876.
    SPRING_APPLICATION_NAME: Имя приложения. В данном случае: TestBd.

Для db (база данных):

    POSTGRES_DB: Имя базы данных, которое будет создано при запуске контейнера. В данном случае: TestBd.
    POSTGRES_USER: Имя пользователя для подключения к базе данных. В данном случае: postgres.
    POSTGRES_PASSWORD: Пароль для пользователя базы данных. В данном случае: 28762876.

Если необходимо изменить эти значения (например, для использования другого имени базы данных или пароля), откройте файл docker-compose.yml и отредактируйте соответствующие строки.

Теперь ваш проект готов к локальному запуску с использованием Docker Compose!

Если возникнут проблемы, например, с доступом к контейнерам или ошибками в логах, можно просмотреть подробные логи с помощью команды:

docker-compose logs

Эта команда выведет логи всех контейнеров в терминал, что поможет разобраться в возможных проблемах.
Часть взято из документации, хорошего дня.